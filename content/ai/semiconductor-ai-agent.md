---
title: "0.1나노의 공학, 그리고 미분 불가능한 코드의 최적화"
description: "왜 반도체 설계에 AI Agent 도입이 필연적인가? LLM 기반 에이전트가 코드라는 불연속적 공간에서 어떻게 최적화를 가능하게 하는지 엔지니어링 관점에서 분석합니다."
date: "2025-02-04"
tags: ["ai", "semiconductor", "llm", "engineering", "automation"]
thumbnail: "/images/semiconductor-ai/banner.png"
---

![반도체 AI Agent](/images/semiconductor-ai/banner.png)

대한민국 기술의 정점이라 불리는 삼성전자 메모리사업부. 우리는 0.1nm 단위의 물리적 한계를 극복하고 HBM과 같은 혁신 제품을 만들어냅니다. 하지만 그 화려한 스펙 뒤단, 실제 엔지니어링의 현장은 어떨까요?

수천 명의 석/박사 엔지니어가 Verilog 타이밍을 맞추기 위해 밤새 시뮬레이션을 돌리고, 테라바이트급 로그에서 특정 헥사(Hex) 값을 찾기 위해 정규식(Regex)과 씨름하는, 이른바 **'Human-in-the-loop Optimization(인간 개입 최적화)'**의 극한을 달리고 있습니다.

오늘은 왜 반도체 설계/검증 분야에 **'AI Agent(에이전틱 워크플로우)'** 도입이 필연적인지, 그리고 그것이 어떻게 기존 공학의 난제였던 '미분 불가능한 코드'를 최적화하는지 엔지니어링 관점에서 기술해보려 합니다.

---

## 1. 현장의 병목: "우리는 코드를 짜는 게 아니라, 규격을 번역하고 있다"

메모리 반도체 개발의 70%는 창의적인 설계가 아닙니다. 방대한 스펙(JEDEC, Internal Spec)을 RTL 코드로 변환하고, 그 변환이 맞는지 검증(Verification)하는 **'Translation & Validation'** 과정입니다.

이 과정에서 **'Claude Code'**와 같은 에이전틱 툴이 도입되었을 때, 단순한 생산성 향상을 넘어 업무의 질 자체가 어떻게 변하는지 구체적인 코드로 살펴봅니다.

![Verilog 코드와 AI](/images/semiconductor-ai/001.png)

### Case 1: RTL Design (Parameter Mapping & FSM Logic)

DRAM 컨트롤러 설계 시, 스펙이 변경되면 타이밍 파라미터(`tRFC`, `tREFI` 등)와 그에 따른 State Machine 로직을 수정해야 합니다. 이는 단순하지만 치명적인 휴먼 에러(Human Error)가 가장 많이 발생하는 지점입니다.

**[Before: Human Engineer]**
엔지니어가 PDF 문서를 듀얼 모니터에 띄워두고, 계산기로 클럭 사이클을 계산하여 하드코딩합니다. 실수가 발생하면 디버깅에 며칠을 씁니다.

**[After: Agentic Workflow]**
에이전트에게 **"DDR5 Spec Rev 1.2 문서를 참조하여, 3200MHz 동작 기준 Refresh FSM을 재설계하라"**고 지시합니다.

```systemverilog
// Generated by Agent (Context: DDR5 Spec Rev 1.2, Target: 3200MHz)
module dram_refresh_ctrl (
    input logic clk,
    input logic rst_n,
    output logic ref_req
);
    // [Agent Insight] 3200MHz (Period: 0.3125ns) 기준 tREFI 3.9us 계산
    // 3900ns / 0.3125ns = 12480 cycles
    localparam int REF_PERIOD_CYCLES = 12480; 
    
    // Timer Logic
    logic [13:0] timer; // Agent가 bit-width도 자동으로 최적화 (12480을 담기에 충분한 14bit)
    
    typedef enum logic [1:0] {IDLE, COUNT, REQ_ASSERT, WAIT_ACK} state_t;
    state_t current_state, next_state;

    // FSM State Logic (생략: 에이전트가 Spec에 맞게 자동 생성)
    // ...
endmodule
```

> **Tech Note:** 에이전트는 단순 코딩뿐만 아니라, `REF_PERIOD_CYCLES` 계산의 근거를 주석으로 남기고, `timer`의 비트 폭(Bit-width)까지 최적화하여 합성(Synthesis) 시 면적 낭비를 줄입니다.

### Case 2: Verification (UVM Sequence for Corner Cases)

검증 엔지니어의 시간은 대부분 **"어떻게 하면 이 디자인을 망가뜨릴까(Corner Case 찾기)"**에 쓰입니다.

**[Before: Human Engineer]**
엔지니어는 커버리지 보고서를 분석한 뒤, 뚫리지 않은 구멍(Hole)을 채우기 위해 수동으로 시퀀스를 작성합니다.

**[After: Agentic Workflow]**
에이전트에게 **"현재 Coverage가 92%다. Bank Conflict가 발생하는 상황에서 Random Write/Read가 섞이는 가혹한 시퀀스를 생성해서 Coverage hole을 채워라."**라고 지시합니다.

```systemverilog
// Generated by Agent (Objective: Maximize Bank Conflict Coverage)
class heavy_conflict_sequence extends uvm_sequence #(mem_transaction);
    `uvm_object_utils(heavy_conflict_sequence)

    task body();
        mem_transaction tr;
        int prev_bank = -1;
        
        repeat(5000) begin
            tr = mem_transaction::type_id::create("tr");
            start_item(tr);
            if (!tr.randomize() with {
                // [Agent Insight] 이전 트랜잭션과 동일한 Bank를 강제하여 Conflict 유도
                if (prev_bank != -1) { bank == prev_bank; }
                // Row Address는 다르게 설정하여 Page Miss 유도
                row_addr inside {[0:32'hFFFF]};
                op_type dist {WRITE:=60, READ:=40}; 
                delay == 0; // Back-to-back transaction으로 파이프라인 부하 극대화
            }) begin
                `uvm_error("SEQ", "Randomization failed")
            end
            prev_bank = tr.bank;
            finish_item(tr);
        end
    endtask
endclass
```

> **Tech Note:** AI는 'Bank Conflict'라는 추상적 의도를 이해하고, 이를 유도하기 위한 구체적인 조건을 `constraint` 블록 내의 논리식으로 정확히 변환합니다.

---

## 2. Engineering Theory: 왜 이제야 가능한가?

왜 지난 수십 년간의 자동화 툴(Automation Tools)은 이를 해내지 못하고, LLM 기반의 에이전트가 이를 해결하는 걸까요? 이는 공학적 최적화 문제의 본질인 **'코드의 불연속성(Discontinuity)'** 때문입니다.

![최적화 그래프](/images/semiconductor-ai/002.png)

### 반도체 개발은 거대한 SA(Simulated Annealing) 과정이다

우리의 개발 프로세스는 수학적 최적화 알고리즘인 SA(담금질 기법)와 놀랍도록 유사합니다.

1. **Global Search (High Temperature):** 아키텍트가 "HBM4는 16단 적층으로 간다", "공정은 1c 나노를 쓴다"와 같은 큰 폭의 구조 변경(Jump)을 수행합니다.
2. **Local Optimization (Cooling):** 수천 명의 엔지니어가 PPA(Power, Performance, Area) 목표를 맞추기 위해 파라미터를 미세 조정(Fine-tuning)합니다.

### 기존 알고리즘(Gradient Descent, GA)의 한계

문제는 이 **'Local Optimization'** 단계입니다. 물리적 수치(전압, 길이)는 미분 가능하므로 기존 알고리즘으로 최적화가 쉽습니다. 하지만 **'코드(RTL/Script)'는 미분 불가능(Non-differentiable)**합니다.

* `if (cnt > 5)` 라는 코드에서 `5`를 `5.1`로 바꾸면 문법 에러가 발생합니다.
* 기존의 기계적 탐색 방법론(GA 등)은 문법(Syntax)과 의미(Semantics)가 결합된 '코드 공간'을 탐색할 수 없었습니다.
* 따라서 **"문법에 맞게 코드를 수정하면서, 의도(Objective)를 달성할 수 있는"** 유일한 실행기(Actuator)인 **인간 엔지니어**가 그 반복 루프(Loop)를 담당해야 했습니다.

### LLM: Semantic Optimization의 시작

LLM 기반 에이전트의 등장이 혁명적인 이유는, 코드를 텍스트가 아닌 **'의미(Semantics)의 공간'**에서 다루기 때문입니다.

* 에이전트는 "Setup Time Violation이 났으니, 데이터 패스에 버퍼를 추가해"라는 **의미론적 지시**를 이해합니다.
* 그리고 이를 문법적으로 완벽한(Syntax-safe) 코드로 변환해냅니다.
* 즉, **'코드라는 불연속적 공간에서 미분(최적화)이 가능해진 것'**입니다.

---

## 3. Future Outlook: 'Solver'에서 'Verifier'로

이러한 변화는 반도체뿐만 아니라 현대 공학(Computational Engineering) 전체의 거대한 트렌드입니다. **"완벽한 공식(Formula)을 버리고, 최적의 근사(Approximation)를 찾는다"**는 **Inverse Design(역설계)**의 시대가 도래했습니다.

![미래 공학](/images/semiconductor-ai/003.png)

### A. Bio: DeepMind AlphaFold

단백질 구조를 파악하기 위해 기존 물리학(슈뢰딩거 방정식)을 쓴다면 우주의 나이만큼 시간이 걸립니다.

* **Paradigm Shift:** AlphaFold는 물리 공식을 버렸습니다. 대신 20만 개의 단백질 구조 데이터(PDB)를 학습해 패턴을 찾아냈고, 실험 없이 구조를 99% 정확도로 **'예측'**했습니다.

### B. Semiconductor: Google AlphaChip

칩 내부 배치(Floorplanning)는 수십 년간 인간 엔지니어의 감(Intuition)에 의존했습니다.

* **Paradigm Shift:** AI가 칩 설계를 '바둑' 같은 게임으로 인식하고 강화학습(RL)을 수행했습니다. 그 결과, 인간이 보기엔 **괴상망측한(Alien-like) 배치**가 나왔지만, 시뮬레이션 결과 전력 효율과 성능은 인간의 설계를 압도했습니다.

### C. Aerospace: SpaceX

완벽한 설계도를 그리기 위해 몇 년을 쓰는 NASA 방식 대신, **Iterative Design(반복 설계)**을 택했습니다.

* **Paradigm Shift:** 3D 프린팅으로 빠르게 시제품을 만들고, AI를 이용해 테스트 데이터를 분석한 뒤, 다음 날 바로 수정한 버전을 띄웁니다.

---

## 결론: 우리는 무엇을 준비해야 하는가?

이제 엔지니어의 역할은 "주어진 스펙을 코드로 구현하는 사람(Implementation Solver)"에서 **"문제를 정의하고, AI가 내놓은 결과값의 물리적 타당성을 검증하는 사람(Verifier)"**으로 이동하고 있습니다.

보안(Security) 이슈로 인해 아직은 사내 망이라는 댐 안에 갇혀 있지만, 기술적 효율성의 압력은 결국 이 댐을 넘어서게 될 것입니다.

**"공식은 죽었고, 근사는 승리했다."**

우리는 이제 '맨아워(Man-hour)'를 갈아 넣는 시대와 작별하고, 에이전트라는 새로운 동료와 함께 0.1나노의 극한을 탐험할 준비를 해야 합니다.
